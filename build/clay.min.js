/*! clay 2014-05-28 */
(function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c=[].slice;a=function(){function a(a,c,d){this.container=a,this.minWidth=c,this.padding=d,this.bindOnResize=b(this.bindOnResize,this),this.layout=b(this.layout,this),this.measure=b(this.measure,this),this.measure(),this.layout(),this.bindOnResize()}return a.prototype.measure=function(){var a,b,c;return c=this.container.outerWidth(),a=c/this.minWidth,this.padding&&(c-=this.padding*a),this.colCnt=Math.floor(a),b=(c-this.colCnt*this.minWidth)/this.colCnt,this.itemWidth=b+this.minWidth,this.grid=[],$(".item").each(function(a){return function(b,c){var d,e,f;return e=$(c).height(),d=b%a.colCnt,f=Math.floor(b/a.colCnt),a.grid[f]||a.grid.push([]),a.grid[f][d]={x:0===d?a.padding:a.itemWidth+a.grid[f][d-1].x+a.padding,y:0===f?a.padding:a.grid[f-1][d].item.height()+a.grid[f-1][d].y+a.padding,item:$(c)}}}(this)),console.log(this.grid)},a.prototype.layout=function(){var a,b,c,d,e,f;for($(".item").width(this.itemWidth),e=this.grid,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(function(){var c,d,e;for(e=[],c=0,d=b.length;d>c;c++)a=b[c],e.push(a.item.css({transform:"translate("+a.x+"px,"+a.y+"px)"}));return e}());return f},a.prototype.bindOnResize=function(){var a;return a=this.debounce(function(a){return function(){return a.measure(),a.layout()}}(this)),$(window).on("resize",function(){return a()})},a.prototype.debounce=function(a,b,d){var e;return e=null,function(){var f,g,h;return f=1<=arguments.length?c.call(arguments,0):[],h=this,g=function(){return d||a.apply(h,f),e=null},e?clearTimeout(e):d&&a.apply(h,f),e=setTimeout(g,b||100)}},a}(),window.Clay=a}).call(this);