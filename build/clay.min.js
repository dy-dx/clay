/*! clay 2014-06-01 */
(function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c=[].slice;a=function(){function a(a,c){this.bindOnResize=b(this.bindOnResize,this),this.layout=b(this.layout,this),this.measure=b(this.measure,this),this._merge_opts(this.defaults,c),this.container=document.querySelector(a),this.minWidth=this.defaults.minWidth,this.padding=this.defaults.padding,this.measure(),this.layout(),this.bindOnResize()}return a.prototype.defaults={minWidth:200,padding:20},a.prototype.measure=function(){var a,b,c,d,e,f,g,h,i,j,k,l;for(h=this.container.clientWidth,e=h/this.minWidth,this.colCnt=Math.floor(e),this.padding&&(h-=this.padding*(this.colCnt-1)),f=(h-this.colCnt*this.minWidth)/this.colCnt,this.itemWidth=f+this.minWidth,this.grid=[],k=document.querySelectorAll(".item"),l=[],c=i=0,j=k.length;j>i;c=++i)d=k[c],b=d.clientHeight,a=c%this.colCnt,g=Math.floor(c/this.colCnt),this.grid[g]||this.grid.push([]),l.push(this.grid[g][a]={x:0===a?0:this.itemWidth+this.grid[g][a-1].x+this.padding,y:0===g?0:this.grid[g-1][a].item.clientHeight+this.grid[g-1][a].y+this.padding,item:d});return l},a.prototype.layout=function(){var a,b,c,d,e,f;for(e=this.grid,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(function(){var c,d,e;for(e=[],c=0,d=b.length;d>c;c++)a=b[c],a.item.style.width=""+this.itemWidth+"px",e.push(a.item.style.webkitTransform="translate("+a.x+"px,"+a.y+"px)");return e}.call(this));return f},a.prototype.bindOnResize=function(){var a;return a=this._debounce(function(a){return function(){return a.measure(),a.layout()}}(this)),window.addEventListener("resize",function(){return a()})},a.prototype._debounce=function(a,b,d){var e;return e=null,function(){var f,g,h;return f=1<=arguments.length?c.call(arguments,0):[],h=this,g=function(){return d||a.apply(h,f),e=null},e?clearTimeout(e):d&&a.apply(h,f),e=setTimeout(g,b||100)}},a.prototype._merge_opts=function(a,b){var c,d;d=[];for(c in b)d.push(a[c]=b[c]);return d},a}(),window.Clay=a}).call(this);